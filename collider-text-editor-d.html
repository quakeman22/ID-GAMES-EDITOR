<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<title>HeroCraft Text Editor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>
<style>
body {
    font-family: 'Courier New', monospace;
    background:#fef6e4; /* creme claro */
    margin:0;
    color:#5c4033; /* marrom escuro elegante */
}

.app-header {
    position:fixed;
    top:0; left:0; width:100%;
    background:#f2e6d8; /* creme m√©dio */
    color:#5c4033;
    z-index:50;
    padding:1rem;
    display:flex;
    justify-content:space-between;
    align-items:center;
    font-family:'Impact', sans-serif;
    font-size:1.3rem;
    box-shadow:0 4px 8px rgba(0,0,0,0.2);
}

.app-header .title { flex:1; text-align:center; }

.editor-container {
    margin-top:6rem;
    max-width:900px;
    width:95%;
    margin-left:auto;
    margin-right:auto;
    display:flex;
    flex-direction:column;
    gap:0.5rem;
}

#list {
    background:#fff6eb; /* creme suave */
    border:2px solid #d8c4a0; /* tom elegante de contorno */
    border-radius:0.5rem;
    padding:1rem;
    max-height:70vh;
    overflow-y:auto;
}

#list::-webkit-scrollbar { width:12px; }
#list::-webkit-scrollbar-track { background:#fef6e4; }
#list::-webkit-scrollbar-thumb { background:#d8a95a; border-radius:6px; border:3px solid #fef6e4; }

.modern-textarea {
    background:#fffbed; /* creme leve */
    color:#5c4033;
    border:2px solid #d8c4a0;
    border-radius:0.5rem;
    padding:0.75rem;
    font-family:'Courier New', monospace;
    font-size:0.95rem;
    width:100%;
    resize:none;
    transition: border 0.3s, box-shadow 0.3s;
}

.modern-textarea:focus {
    border-color:#bfa06f;
    outline:none;
    box-shadow:0 0 10px #bfa06f50;
}

button {
    font-family: 'Impact', sans-serif;
    font-weight:bold;
    border-radius:0.5rem;
    border:2px solid #bfa06f;
    background:#f2e6d8;
    color:#5c4033;
    padding:0.5rem 1rem;
    cursor:pointer;
    transition: all 0.3s;
    margin-right:0.5rem;
}

button:hover {
    background:#d8c4a0;
    color:#fff6e4;
    box-shadow:0 0 10px #bfa06f50;
    transform: scale(1.05);
}

#file { display:none; }
</style>
</head>
<body>

<div class="app-header">
    <button id="openFileBtn">üìÇ Abrir</button>
    <div class="title">HeroCraft Editor</div>
    <div>
        <button id="infoBtn">‚ÑπÔ∏è</button>
        <button id="save" disabled>üíæ Salvar</button>
    </div>
</div>

<div class="editor-container">
    <input type="file" id="file" accept=".bin">
    <input type="file" id="importFile" accept=".txt" style="display:none">
    <div id="list"></div>
</div>

<script>
// script permanece igual ao seu original
let bytes;
let blocks = [];

const fileInput = document.getElementById('file');
const importInput = document.getElementById('importFile');
const list = document.getElementById('list');
const saveBtn = document.getElementById('save');
const openFileBtn = document.getElementById('openFileBtn');

openFileBtn.addEventListener('click', ()=>fileInput.click());
fileInput.addEventListener('change', e=>{
    const f = e.target.files[0];
    if(!f) return;
    const reader = new FileReader();
    reader.onload = ev=>{
        bytes = new Uint8Array(ev.target.result);
        parseFile();
        saveBtn.disabled = false;
    };
    reader.readAsArrayBuffer(f);
});

function parseFile(){
    blocks=[];
    list.innerHTML='';
    let offset=0;
    let blockIndex=0;

    while(offset + 2 <= bytes.length){
        let size = (bytes[offset] << 8) + bytes[offset+1];
        offset += 2;
        const textBytes = bytes.slice(offset, offset+size);
        let text = String.fromCharCode(...textBytes);

        const card = document.createElement('div');
        card.className="mb-2";
        const ta = document.createElement('textarea');
        ta.className="modern-textarea";
        ta.value=text;
        ta.rows=Math.max(1,text.split('\n').length);
        ta.oninput=()=>blocks.find(b=>b.input===ta).text = ta.value;
        card.appendChild(ta);
        list.appendChild(card);

        blocks.push({input:ta,text,index:blockIndex});
        offset += size;
        blockIndex++;
    }
}

saveBtn.addEventListener('click', ()=>{
    const out=[];
    for(const b of blocks){
        const size = b.text.length;
        out.push((size >> 8) & 0xFF, size & 0xFF);
        for(let i=0;i<b.text.length;i++) out.push(b.text.charCodeAt(i));
    }
    const blob = new Blob([new Uint8Array(out)], {type:'application/octet-stream'});
    const a = document.createElement('a');
    a.href=URL.createObjectURL(blob);
    a.download='editado.bin';
    a.click();
    URL.revokeObjectURL(a.href);
});

document.getElementById('infoBtn').addEventListener('click', ()=>{
    alert("Editor de textos para jogos Herocraft\n\nDesenvolvedor: QUAKEMAN\n2024/25\nDiscord: https://discord.gg/WyJtDDqJ9c\nSite: https://quakeman0.blogspot.com");
});
</script>

</body>
</html>
